<body>
<script>
// SET W, H
	if (document.getElementById('main')) {
		framer=document.getElementById('main');
		framer.style.height="calc(90% - 72px)";
	}

window.onresize();

// CREATE THE SOUND LINKS PHYSICALLY
for (var i = 0; i<gens.length; i++) {
	var f;
	       if (gens[i].domain === 'youtube') { f = youtubeSound;
	} else if (gens[i].domain === 'tumblr') {  f = tumblrSound;
	} else continue;
	framer.appendChild(gens[i].content = document.createElement('div'));
	gens[i].content.classList.add('balls');
	gens[i].content.onclick = f;
	gens[i].content.data = gens[i].data;
	var bb = Math.floor(Math.random()*16777215).toString(16);
	while (bb.length < 6) { bb = '0' + bb; }
	gens[i].content.style.background = '#'+bb// ['#ff0000','#00ff00','#0000ff'][Math.floor(Math.random() * 3)];
	gens[i].content.style.top = Math.random() * H;
	gens[i].content.style.left = Math.random() * W;
	gens[i].content.vx = Math.random() * 6 - 3;
    gens[i].content.vy = Math.random() * 6 - 3;
    move(gens[i].content);
}
//ACTIVATE SOUND ANALYSIS
//renderFrame();
// ACTIVATE MOVEMENT
f=function(){
    for (var i=0; i<gens.length; i++) move(gens[i].content);
    for (var i=0; i<gens.length; i++) {
        for (var j=i+1; j<gens.length; j++) {
            collide(gens[i].content,gens[j].content);
        }
    }
    requestAnimationFrame(f);
}
f();
</script>