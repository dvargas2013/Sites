<style>
td { cursor: pointer; }
.blank { display: none; }
.highlite { background-color: yellow; border: 2px yellow ridge; }
</style>
<table border=3 cellspacing=3 cellpadding=3> 
<thead>
<tr>
<td colspan="10" align=center><b id="swingText">Swing</b> <b id="shearText">Shear</b></td> 
</tr>
</thead>
<tbody id="calendar">
<tr><td align=center></td><td align=center></td><td align=center></td><td align=center></td><td align=center></td><td align=center></td><td align=center></td><td align=center></td><td align=center></td></tr>
<tr><td align=center></td><td align=center></td><td align=center></td><td align=center></td><td align=center></td><td align=center></td><td align=center></td><td align=center></td><td align=center></td></tr>
<tr><td align=center></td><td align=center></td><td align=center></td><td align=center></td><td align=center></td><td align=center></td><td align=center></td><td align=center></td><td align=center></td></tr>
<tr><td align=center></td><td align=center></td><td align=center></td><td align=center></td><td align=center></td><td align=center></td><td align=center></td><td align=center></td><td align=center></td></tr>
<tr><td align=center></td><td align=center></td><td align=center></td><td align=center></td><td align=center></td><td align=center></td><td align=center></td><td align=center></td><td align=center></td></tr>
<tr><td align=center></td><td align=center></td><td align=center></td><td align=center></td><td align=center></td><td align=center></td><td align=center></td><td align=center></td><td align=center></td></tr>
<tr><td align=center></td><td align=center></td><td align=center></td><td align=center></td><td align=center></td><td align=center></td><td align=center></td><td align=center></td><td align=center></td></tr>
<tr><td align=center></td><td align=center></td><td align=center></td><td align=center></td><td align=center></td><td align=center></td><td align=center></td><td align=center></td><td align=center></td></tr>
<tr><td align=center></td><td align=center></td><td align=center></td><td align=center></td><td align=center></td><td align=center></td><td align=center></td><td align=center></td><td align=center></td></tr>
<tr><td align=center></td><td align=center></td><td align=center></td><td align=center></td><td align=center></td><td align=center></td><td align=center></td><td align=center></td><td align=center></td></tr>
<tr><td align=center></td><td align=center></td><td align=center></td><td align=center></td><td align=center></td><td align=center></td><td align=center></td><td align=center></td><td align=center></td></tr>
<tr><td align=center></td><td align=center></td><td align=center></td><td align=center></td><td align=center></td><td align=center></td><td align=center></td><td align=center></td><td align=center></td></tr>
</tbody>
</table>
<input id="input" onkeydown="if (event.keyCode === 13) fillFromDate(this.value)">
<script>
Date.prototype.addDays=function(d){ this.setDate(this.getDate()+d) };
var swingnames = ["Bien","Calentar","Morrelen","Fio","Hayee","Nan","Mosuo","Oyee","Theek","Zesto","Sharrot","Gamgi","Apposto","Nyano","Napipavati","Long"],
// number of days in a swing
	swingnums = [92,94,90,89,92,94,90,89,92,94,90,89,92,94,90,90], // note: Long is 1 day shorter every 32 shears
	swinglen = 16,
	inserts = calendar.getElementsByTagName('td'),
// maximum number of days to be in swing since the beginning of the shear
	swingcum =  [swingnums[0]];
// cumulative sum of swingnums
for (var i=1; i<swingnums.length; i++) { swingcum[i] = swingcum[i-1] + swingnums[i]; }
clickgtd = function(e) {
    var newday = parseInt(this.textContent);
    if (isNaN(newday)) return;
    fillFromDate(0,gtd - DAY + newday);
}
for (var i=0; i<inserts.length; i++) inserts[i].onclick = clickgtd;

// to be used with swingcum to find which swing we are on
function binarySearch(items, val){
	var a=0, b=items.length;
	while (a<b) {
	    var m = (a+b)>>>1;
	    if (items[m]==val) { return m; }
	    if (items[m]<val) { a=m+1; } else { b=m; }
	}
	return a;
}

var gtd, SWING, DAY, SHEAR;
function fillFromDate(datestr,td) {
    var ref=new Date("19 Mar 2016 GMT");
    if (td === undefined) {
        // find td from datestr
        var date = new Date(datestr),
            td = Math.floor( (date - ref) / 864E5 ); // 1000*60*60*24
        // if it didn't work . reset to old total days
        if (isNaN(date.valueOf())) td = gtd;
    }

    if ((typeof td) === "number") gtd = td;
    else td = gtd;
    
	// change the input to be proper
	ref.addDays(td);
	input.value = ref.toUTCString().split(' ').slice(1,4).join(' ');

    var ex = 1;
    td -= 1;
    if (td < 0) {
		var n = Math.floor( td / -46751 ) + 1;
		td += 46751*n;
		ex -= 32*n;
	}

	// subtract and add it back in order to make min=1 and max=%
	var shear = Math.floor((td % 46751) / 1461) + 32*Math.floor(td / 46751) + ex,
		day = (td % 46751) % 1461 + 1;
	var	swingdex = binarySearch(swingcum,day);
	if (swingdex > 0) day -= swingcum[swingdex-1];
	
	SHEAR = shear;
	SWING = swingdex+1;
	DAY = day;

    refreshCalendar();
}
refreshCalendar = function refreshCalendar() {
    // SWING DAY, SHEAR is technically enough
    swingText.textContent = swingnames[SWING-1];
	shearText.textContent = Math.abs(SHEAR);

	while (shearText.textContent.length < 3)
		shearText.textContent = "0" + shearText.textContent;
	if (SHEAR < 0) shearText.textContent = "-" + shearText.textContent;
	
	var dayofweekshift = ((SWING + SHEAR) % 9 + 9) % 9;
    for (var i=0; i<dayofweekshift; i++) {
        inserts[i].textContent = "";
		inserts[i].classList.remove('highlite','blank');
    }

	var stopper = swingnums[SWING-1] + dayofweekshift;
	// LONG is SHORT on 32th SHEARS
	// taken account of by calculating shears and days with reference to 46751
	// just making sure display matches up here
	if (SWING === 16 && SHEAR%32 === 0) stopper -= 1;
	
	for(var i=dayofweekshift; i<stopper; i++) {
		inserts[i].textContent = i+1-dayofweekshift;
		inserts[i].classList.remove('highlite','blank');
	}
	for(var i=stopper; i<inserts.length; i++) {
		inserts[i].textContent = "";
		inserts[i].classList.remove('highlite');
	}
    for (var i=0; i<inserts.length; i+=9) {
        if (inserts[i].parentElement.textContent)
        	inserts[i].parentElement.classList.remove('blank');
        else 
			inserts[i].parentElement.classList.add('blank');
			
    }

	inserts[DAY-1+dayofweekshift].classList.add('highlite');
} 
document.body.onkeydown = function(e){
	if (e.srcElement!==this) return;
	switch (e.keyCode) {
		// left up right down
		case 37: fillFromDate(0,gtd-swingnums[(SWING-2+swingnums.length) % swingnums.length]); break; 
		case 38: fillFromDate(0,gtd-(SHEAR%32===0?1460:1461)); break;
		case 39: fillFromDate(0,gtd+swingnums[SWING-1]); break;
		case 40: fillFromDate(0,gtd+(SHEAR%32===0?1460:1461)); break;
	}
}
fillFromDate(new Date());
</script>