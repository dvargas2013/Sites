<canvas id=canvas style="border:1px dotted">
<script>
var context = canvas.getContext("2d");
var clickX,clickY,clickDrag;
var camx, camy;
var paint = false;

window.onresize = function() {
	canvas.width = W = document.body.clientWidth * .95;
	canvas.height = H = document.body.clientHeight * .95;
	redraw();
}
canvas.ondblclick = clear = function clear() {
	clickX = new Array();
	clickY = new Array();
	clickDrag = new Array();
	camx = camy = 0;
	window.onresize();
};
clear();

function addClick(x, y, dragging) {
	clickX.push(x+camx);
	clickY.push(y+camy);
	clickDrag.push(dragging);
	redraw();
}

function redraw() {
	context.clearRect(0, 0, W, H);
	context.strokeStyle = "black";
	context.lineJoin = "round";
	context.lineWidth = 2;

	for (var i = 0; i < clickX.length; i++) {
		context.beginPath();
		if (clickDrag[i] && i)
			context.moveTo(clickX[i - 1]-camx, clickY[i - 1]-camy);
		else
			context.moveTo(clickX[i]-camx, clickY[i]-camy);
		context.lineTo(clickX[i]-camx, clickY[i]-camy);
		context.closePath();
		context.stroke();
	}
}
canvas.onmousedown = function(e) {
	paint = true;
	addClick(e.pageX - canvas.offsetLeft, e.pageY - canvas.offsetTop);
}
document.body.onmousemove = function(e) {
	if (paint)
		addClick(e.pageX - canvas.offsetLeft, e.pageY - canvas.offsetTop, true);
}
document.body.onmouseup = function(e) {
	paint = false;
}
document.body.onkeydown = function(e) {
	switch (e.which) {
		case 65: case 37: // left
			camx -= W / 16; redraw();
			break;
		case 87: case 38: // up
			camy -= H / 16; redraw();
			break;
		case 68: case 39: // right
			camx += W / 16; redraw();
			break;
		case 83: case 40: // down
			camy += H / 16; redraw();
			break;
	}
}

</script>